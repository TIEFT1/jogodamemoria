<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MEM√ìRIA M√ÅGICA - Jogo Divertido para Crian√ßas!</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --color-pink: #FF6B8B;
            --color-blue: #4ECDC4;
            --color-yellow: #FFE66D;
            --color-purple: #9B59B6;
            --color-orange: #FF9F43;
            --color-green: #2ECC71;
            --color-red: #FF5252;
            --color-dark: #34495E;
            --color-light: #F7F9FC;
            --shadow-sm: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 8px 15px rgba(0, 0, 0, 0.2);
            --shadow-lg: 0 12px 25px rgba(0, 0, 0, 0.3);
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            --border-radius: 20px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Neue', cursive, Arial, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #F6E8EA, #F5D6E6);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--color-dark);
            overflow-x: hidden;
        }

        /* üéâ Tela de In√≠cio üéâ */
        .welcome-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
            max-width: 800px;
            width: 90%;
            animation: bounceIn 1s ease-out;
        }

        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0.8);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .logo {
            font-size: 5rem;
            color: var(--color-pink);
            margin-bottom: 1rem;
            text-shadow: 4px 4px 0 var(--color-yellow);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--color-purple);
            text-shadow: 2px 2px 0 var(--color-yellow);
        }

        p {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            color: var(--color-dark);
            max-width: 600px;
        }

        .theme-selector {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .theme-btn {
            padding: 1rem 1.8rem;
            border: none;
            border-radius: 50px;
            background: white;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow-sm);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.1rem;
        }

        .theme-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: var(--shadow-md);
        }

        .theme-btn i {
            font-size: 1.5rem;
        }

        .theme-btn.animals {
            background: var(--color-green);
        }

        .theme-btn.food {
            background: var(--color-orange);
        }

        .theme-btn.vehicles {
            background: var(--color-blue);
        }

        .theme-btn.space {
            background: var(--color-purple);
        }

        .difficulty-selector {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .difficulty-btn {
            padding: 1rem 1.8rem;
            border: none;
            border-radius: 50px;
            background: var(--color-light);
            color: var(--color-dark);
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow-sm);
            font-size: 1.1rem;
        }

        .difficulty-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .difficulty-btn.active {
            background: var(--color-pink);
            color: white;
        }

        .start-btn {
            padding: 1.2rem 3rem;
            border: none;
            border-radius: 50px;
            background: var(--color-red);
            color: white;
            font-size: 1.4rem;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow-md);
            margin-top: 1rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .start-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: var(--shadow-lg);
            background: #FF3D3D;
        }


        /* Logo FMP */
        .fmp-logo {
            position: absolute;
            top: 20px;
            left: 20px;
            max-height: 80px;
            max-width: 180px;
            object-fit: contain;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
            z-index: 1;
        }

        @media (max-width: 768px) {
            .fmp-logo {
                max-height: 60px;
                max-width: 140px;
                top: 15px;
                left: 15px;
            }
        }

        @media (max-width: 480px) {
            .fmp-logo {
                max-height: 50px;
                max-width: 120px;
                top: 10px;
                left: 10px;
            }
        }

        .game-header .fmp-logo {
            position: absolute;
            top: 15px;
            left: 15px;
            max-height: 60px;
            max-width: 150px;
        }

        @media (max-width: 768px) {
            .game-header .fmp-logo {
                max-height: 50px;
                max-width: 120px;
            }
        }

        /* üéÆ Tela do Jogo üéÆ */
        .game-screen {
            display: none;
            width: 100%;
            max-width: 800px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            overflow: hidden;
            position: relative;
            animation: zoomIn 0.5s ease-out;
        }

        @keyframes zoomIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .game-header {
            background: linear-gradient(to right, var(--color-pink), var(--color-purple));
            color: white;
            padding: 1.5rem;
            text-align: center;
            position: relative;
        }

        .game-title {
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
            text-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
        }

        .game-controls {
            display: flex;
            justify-content: space-between;
            padding: 1rem;
            background-color: rgba(255, 255, 255, 0.9);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            flex-wrap: wrap;
            gap: 1rem;
        }

        .stats-container {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .stat-box {
            background: white;
            padding: 0.8rem 1.5rem;
            border-radius: 50px;
            box-shadow: var(--shadow-sm);
            display: flex;
            align-items: center;
            font-weight: 600;
            gap: 0.8rem;
            font-size: 1.1rem;
        }

        .stat-box i {
            color: var(--color-pink);
            font-size: 1.3rem;
        }

        .back-btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 50px;
            background: var(--color-light);
            color: var(--color-dark);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow-sm);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.1rem;
        }

        .back-btn:hover {
            background: var(--color-blue);
            color: white;
            transform: translateY(-3px);
        }

        .game-board {
            padding: 1.5rem;
            display: grid;
            gap: 1.2rem;
            perspective: 1000px;
            justify-content: center;
        }

        .card {
            aspect-ratio: 1/1;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.4, 0.0, 0.2, 1);
            cursor: pointer;
            border-radius: 16px;
            box-shadow: var(--shadow-sm);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .card-front {
            background: linear-gradient(45deg, var(--color-pink), var(--color-blue));
            transform: rotateY(180deg);
            color: white;
        }

        .card-back {
            background: white;
            border: 5px solid var(--color-light);
            transform: rotateY(0deg);
            transition: var(--transition);
            background: linear-gradient(135deg, #F8F9FA, #E9ECEF);
        }

        .card-back:hover {
            border-color: var(--color-pink);
            transform: rotateY(0deg) scale(1.05);
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card.matched {
            transform: rotateY(180deg);
            animation: matchedAnimation 0.8s ease-in-out;
        }

        @keyframes matchedAnimation {
            0% {
                transform: rotateY(180deg) scale(1);
            }

            50% {
                transform: rotateY(180deg) scale(1.1);
            }

            100% {
                transform: rotateY(180deg) scale(1);
            }
        }

        .card.shake {
            animation: shakeAnimation 0.5s ease-in-out;
        }

        @keyframes shakeAnimation {

            0%,
            100% {
                transform: rotateY(180deg) translateX(0);
            }

            20% {
                transform: rotateY(180deg) translateX(-15px);
            }

            40% {
                transform: rotateY(180deg) translateX(15px);
            }

            60% {
                transform: rotateY(180deg) translateX(-15px);
            }

            80% {
                transform: rotateY(180deg) translateX(15px);
            }
        }

        .card-icon {
            font-size: 3rem;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
        }

        /* Estilo para a imagem integrada */
        .game-header-image {
            width: 100%;
            max-height: 200px;
            object-fit: cover;
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            border-bottom: 4px solid var(--color-pink);
            box-shadow: var(--shadow-md);
            margin-bottom: 1rem;
        }

        /* Ajuste para telas menores */
        @media (max-width: 768px) {
            .game-header-image {
                max-height: 150px;
            }
        }

        /* üèÜ Tela de Resultado üèÜ */
        .result-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 100;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.5s ease-out;
        }

        .result-box {
            background: white;
            padding: 2.5rem;
            border-radius: var(--border-radius);
            text-align: center;
            max-width: 500px;
            width: 90%;
            transform: scale(0.9);
            transition: transform 0.3s ease;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }

        .result-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 12px;
            background: linear-gradient(to right, var(--color-pink), var(--color-blue), var(--color-purple));
        }

        .result-title {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--color-purple);
            text-shadow: 2px 2px 0 var(--color-yellow);
        }

        .result-icon {
            font-size: 5rem;
            color: var(--color-yellow);
            margin-bottom: 1rem;
            animation: bounce 2s infinite;
            text-shadow: 3px 3px 0 rgba(0, 0, 0, 0.2);
        }

        .result-stats {
            margin: 2rem 0;
            font-size: 1.2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .stat-label {
            font-weight: bold;
            color: var(--color-dark);
        }

        .stat-value {
            font-weight: bold;
            color: var(--color-pink);
        }

        .result-actions {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 50px;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow-sm);
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-size: 1.1rem;
        }

        .play-again-btn {
            background: var(--color-pink);
            color: white;
        }

        .play-again-btn:hover {
            background: #FF3D3D;
            transform: translateY(-5px) scale(1.05);
            box-shadow: var(--shadow-md);
        }

        .home-btn {
            background: var(--color-light);
            color: var(--color-dark);
        }

        .home-btn:hover {
            background: var(--color-blue);
            color: white;
            transform: translateY(-5px) scale(1.05);
            box-shadow: var(--shadow-md);
        }

        /* üéä Efeitos Especiais üéä */
        .confetti {
            position: absolute;
            width: 20px;
            height: 20px;
            opacity: 0;
            z-index: 10;
            animation: confettiFall 5s linear forwards;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }

            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .star {
            position: absolute;
            font-size: 2rem;
            color: var(--color-yellow);
            animation: twinkle 2s infinite alternate;
            opacity: 0;
            z-index: -1;
        }

        @keyframes twinkle {
            from {
                opacity: 0.3;
                transform: scale(0.8);
            }

            to {
                opacity: 1;
                transform: scale(1.2);
            }
        }

        .bubble {
            position: absolute;
            width: 30px;
            height: 30px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            animation: float 5s infinite ease-in-out;
            z-index: -1;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0) rotate(0deg);
            }

            50% {
                transform: translateY(-50px) rotate(180deg);
            }
        }

        /* üì± Responsividade üì± */
        @media (max-width: 768px) {
            .logo {
                font-size: 4rem;
            }

            h1 {
                font-size: 2.5rem;
            }

            .card-icon {
                font-size: 2.5rem;
            }

            .game-title {
                font-size: 2rem;
            }

            .result-title {
                font-size: 2.2rem;
            }

            .result-icon {
                font-size: 4rem;
            }
        }

        @media (max-width: 480px) {

            .theme-btn,
            .difficulty-btn,
            .stat-box {
                padding: 0.8rem 1.2rem;
                font-size: 1rem;
            }

            .start-btn {
                padding: 1rem 2rem;
            }

            .game-controls {
                flex-direction: column;
                align-items: center;
            }

            .stats-container {
                justify-content: center;
            }

            .result-actions {
                flex-direction: column;
                gap: 1rem;
            }

            .action-btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>

<body>
    <!-- üé™ Tela de In√≠cio üé™ -->
    <img src="images/logo-fmp-2.jpg" alt="Faculdade Municipal de Palho√ßa" class="fmp-logo">
    <div class="welcome-screen" id="welcomeScreen">
        <div class="logo">
            <i class="fas fa-brain"></i>
        </div>
        <h1>MEM√ìRIA M√ÅGICA</h1>
        <p>Encontre os pares iguais e divirta-se! Escolha um tema e comece a jogar! üéÆ</p>

        <div class="theme-selector">
            <button class="theme-btn animals" data-theme="animals">
                <i class="fas fa-paw"></i> Animais
            </button>
            <button class="theme-btn food" data-theme="food">
                <i class="fas fa-ice-cream"></i> Comidas
            </button>
            <button class="theme-btn vehicles" data-theme="vehicles">
                <i class="fas fa-car"></i> Ve√≠culos
            </button>
            <button class="theme-btn space" data-theme="space">
                <i class="fas fa-rocket"></i> Espa√ßo
            </button>
        </div>

        <div class="difficulty-selector">
            <button class="difficulty-btn active" data-difficulty="easy">
                <i class="fas fa-baby"></i> F√°cil
            </button>
            <button class="difficulty-btn" data-difficulty="medium">
                <i class="fas fa-child"></i> M√©dio
            </button>
            <button class="difficulty-btn" data-difficulty="hard">
                <i class="fas fa-user-ninja"></i> Dif√≠cil
            </button>
        </div>

        <button class="start-btn" id="startBtn">
            <i class="fas fa-play"></i> VAMOS JOGAR!
        </button>
    </div>

    <!-- üéÆ Tela do Jogo üéÆ -->
    <div class="game-screen" id="gameScreen">
        <div class="game-header">
            <img src="images/logo-fmp-2.jpg" alt="Faculdade Municipal de Palho√ßa" class="fmp-logo">
            <h1 class="game-title">MEM√ìRIA M√ÅGICA</h1>
        </div>

        <div class="game-controls">
            <div class="stats-container">
                <div class="stat-box">
                    <i class="fas fa-clock"></i>
                    <span id="time">00:00</span>
                </div>
                <div class="stat-box">
                    <i class="fas fa-star"></i>
                    <span id="moves">0</span>
                </div>
                <div class="stat-box">
                    <i class="fas fa-check-circle"></i>
                    <span id="matches">0/0</span>
                </div>
            </div>

            <button class="back-btn" id="backBtn">
                <i class="fas fa-home"></i> Voltar
            </button>
        </div>

        <div class="game-board" id="gameBoard"></div>
    </div>

    <!-- üèÜ Tela de Resultado üèÜ -->
    <div class="result-screen" id="resultScreen">
        <div class="result-box">
            <div class="result-icon">
                <i class="fas fa-trophy"></i>
            </div>
            <h2 class="result-title">PARAB√âNS! üéâ</h2>
            <div class="result-stats">
                <div>
                    <span class="stat-label">Tempo:</span>
                    <span class="stat-value" id="finalTime">00:00</span>
                </div>
                <div>
                    <span class="stat-label">Movimentos:</span>
                    <span class="stat-value" id="finalMoves">0</span>
                </div>
                <div>
                    <span class="stat-label">Precis√£o:</span>
                    <span class="stat-value" id="accuracy">100%</span>
                </div>
                <div>
                    <span class="stat-label">Dificuldade:</span>
                    <span class="stat-value" id="finalDifficulty">F√°cil</span>
                </div>
            </div>
            <div class="result-actions">
                <button class="action-btn play-again-btn" id="playAgainBtn">
                    <i class="fas fa-redo"></i> Jogar Novamente
                </button>
                <button class="action-btn home-btn" id="homeBtn">
                    <i class="fas fa-home"></i> Voltar ao In√≠cio
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Elementos DOM
            const elements = {
                welcomeScreen: document.getElementById('welcomeScreen'),
                gameScreen: document.getElementById('gameScreen'),
                resultScreen: document.getElementById('resultScreen'),
                startBtn: document.getElementById('startBtn'),
                backBtn: document.getElementById('backBtn'),
                playAgainBtn: document.getElementById('playAgainBtn'),
                homeBtn: document.getElementById('homeBtn'),
                gameBoard: document.getElementById('gameBoard'),
                timeDisplay: document.getElementById('time'),
                movesDisplay: document.getElementById('moves'),
                matchesDisplay: document.getElementById('matches'),
                finalTime: document.getElementById('finalTime'),
                finalMoves: document.getElementById('finalMoves'),
                accuracy: document.getElementById('accuracy'),
                finalDifficulty: document.getElementById('finalDifficulty'),
                themeBtns: document.querySelectorAll('.theme-btn'),
                difficultyBtns: document.querySelectorAll('.difficulty-btn')
            };

            // Configura√ß√µes do jogo
            const config = {
                easy: { pairs: 8, columns: 4 },
                medium: { pairs: 12, columns: 4 },
                hard: { pairs: 16, columns: 4 }
            };

            // Temas com √≠cones correspondentes
            const themes = {
                animals: [
                    'fa-dog', 'fa-cat', 'fa-hippo', 'fa-fish', 'fa-frog',
                    'fa-kiwi-bird', 'fa-otter', 'fa-cow', 'fa-horse', 'fa-spider',
                    'fa-dove', 'fa-crow', 'fa-dragon', 'fa-bug', 'fa-shrimp',
                    'fa-bee', 'fa-whale', 'fa-unicorn', 'fa-paw', 'fa-feather-alt'
                ],
                food: [
                    'fa-ice-cream', 'fa-cookie', 'fa-apple-alt', 'fa-pizza-slice', 'fa-hamburger',
                    'fa-hotdog', 'fa-bacon', 'fa-lemon', 'fa-pepper-hot', 'fa-cheese',
                    'fa-egg', 'fa-candy-cane', 'fa-cake-candles', 'fa-mug-hot', 'fa-wine-glass-alt',
                    'fa-birthday-cake', 'fa-pepper-hot', 'fa-drumstick-bite', 'fa-ice-cream', 'fa-pepper-hot'
                ],
                vehicles: [
                    'fa-car', 'fa-truck', 'fa-bus', 'fa-train', 'fa-bicycle',
                    'fa-motorcycle', 'fa-ship', 'fa-plane', 'fa-helicopter', 'fa-tractor',
                    'fa-ambulance', 'fa-fire-truck', 'fa-rocket', 'fa-ship', 'fa-subway',
                    'fa-taxi', 'fa-truck-monster', 'fa-sleigh', 'fa-shuttle-van', 'fa-caravan'
                ],
                space: [
                    'fa-rocket', 'fa-meteor', 'fa-moon', 'fa-sun', 'fa-star',
                    'fa-satellite', 'fa-user-astronaut', 'fa-globe-europe', 'fa-shooting-star', 'fa-ufo',
                    'fa-alien-monster', 'fa-planet-ringed', 'fa-stars', 'fa-comet', 'fa-galaxy',
                    'fa-space-station-moon', 'fa-space-shuttle', 'fa-telescope', 'fa-atom', 'fa-satellite-dish'
                ]
            };

            // Estado do jogo
            let state = {
                cards: [],
                flippedCards: [],
                matchedPairs: 0,
                moves: 0,
                timer: null,
                seconds: 0,
                difficulty: 'easy',
                theme: 'animals',
                gameStarted: false,
                totalPairs: 0
            };

            // Inicializar eventos
            initEvents();

            function initEvents() {
                // Bot√£o iniciar jogo
                elements.startBtn.addEventListener('click', startGame);

                // Bot√£o voltar
                elements.backBtn.addEventListener('click', () => {
                    showScreen('welcome');
                    resetGame();
                });

                // Bot√£o jogar novamente
                elements.playAgainBtn.addEventListener('click', () => {
                    showScreen('game');
                    resetGame();
                    startGame();
                });

                // Bot√£o in√≠cio
                elements.homeBtn.addEventListener('click', () => {
                    showScreen('welcome');
                    resetGame();
                });

                // Selecionar tema
                elements.themeBtns.forEach(btn => {
                    btn.addEventListener('click', () => {
                        elements.themeBtns.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        state.theme = btn.dataset.theme;
                    });
                });

                // Selecionar dificuldade
                elements.difficultyBtns.forEach(btn => {
                    btn.addEventListener('click', () => {
                        elements.difficultyBtns.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        state.difficulty = btn.dataset.difficulty;
                    });
                });

                // Definir tema padr√£o como ativo
                document.querySelector('.theme-btn.animals').classList.add('active');
            }

            function showScreen(screen) {
                elements.welcomeScreen.style.display = 'none';
                elements.gameScreen.style.display = 'none';
                elements.resultScreen.style.display = 'none';

                if (screen === 'welcome') {
                    elements.welcomeScreen.style.display = 'flex';
                } else if (screen === 'game') {
                    elements.gameScreen.style.display = 'block';
                } else if (screen === 'result') {
                    elements.resultScreen.style.display = 'flex';
                }
            }

            function startGame() {
                showScreen('game');
                resetGame();
                createCards();
                updateGameBoard();

                // Adicionar bolhas e estrelas de fundo
                addBackgroundBubbles(10);
                addBackgroundStars(15);
            }

            function resetGame() {
                clearInterval(state.timer);
                state.cards = [];
                state.flippedCards = [];
                state.matchedPairs = 0;
                state.moves = 0;
                state.seconds = 0;
                state.gameStarted = false;
                state.totalPairs = config[state.difficulty].pairs;

                updateStats();
            }

            function createCards() {
                const pairs = config[state.difficulty].pairs;
                const themeIcons = themes[state.theme];

                // Selecionar √≠cones aleat√≥rios do tema
                const selectedIcons = [];
                while (selectedIcons.length < pairs) {
                    const randomIndex = Math.floor(Math.random() * themeIcons.length);
                    const icon = themeIcons[randomIndex];
                    if (!selectedIcons.includes(icon)) {
                        selectedIcons.push(icon);
                    }
                }

                // Criar pares de cartas
                const cardValues = [...selectedIcons, ...selectedIcons];

                // Embaralhar as cartas
                cardValues.sort(() => Math.random() - 0.5);

                state.cards = cardValues.map((value, index) => ({
                    id: index,
                    value,
                    flipped: false,
                    matched: false
                }));
            }

            function updateGameBoard() {
                elements.gameBoard.innerHTML = '';

                // Definir layout do grid baseado na dificuldade
                elements.gameBoard.style.gridTemplateColumns = `repeat(${config[state.difficulty].columns}, 1fr)`;

                state.cards.forEach(card => {
                    const cardElement = document.createElement('div');
                    cardElement.className = 'card';
                    cardElement.dataset.id = card.id;

                    if (card.matched) {
                        cardElement.classList.add('matched');
                    }

                    if (card.flipped) {
                        cardElement.classList.add('flipped');
                    }

                    cardElement.innerHTML = `
                        <div class="card-face card-back"></div>
                        <div class="card-face card-front">
                            <i class="fas ${card.value} card-icon"></i>
                        </div>
                    `;

                    cardElement.addEventListener('click', () => flipCard(card.id));
                    elements.gameBoard.appendChild(cardElement);
                });
            }

            function flipCard(cardId) {
                // N√£o permitir virar mais de 2 cartas ou cartas j√° viradas/combat√≠veis
                if (state.flippedCards.length >= 2) return;

                const card = state.cards.find(c => c.id === cardId);
                if (card.flipped || card.matched) return;

                // Iniciar o timer no primeiro movimento
                if (!state.gameStarted) {
                    startTimer();
                    state.gameStarted = true;
                }

                // Virar a carta
                card.flipped = true;
                state.flippedCards.push(card);
                updateGameBoard();

                // Verificar combina√ß√£o quando duas cartas estiverem viradas
                if (state.flippedCards.length === 2) {
                    state.moves++;
                    updateStats();

                    if (state.flippedCards[0].value === state.flippedCards[1].value) {
                        // Combina√ß√£o correta
                        setTimeout(() => {
                            state.flippedCards.forEach(c => c.matched = true);
                            state.matchedPairs++;
                            state.flippedCards = [];
                            updateGameBoard();
                            updateStats();

                            // Verificar se o jogo acabou
                            if (state.matchedPairs === state.totalPairs) {
                                endGame();
                            } else {
                                // Efeito de confete para combina√ß√£o
                                createConfetti(15);
                            }
                        }, 500);
                    } else {
                        // Combina√ß√£o incorreta
                        setTimeout(() => {
                            state.flippedCards.forEach(c => {
                                c.flipped = false;
                                const cardElement = document.querySelector(`.card[data-id="${c.id}"]`);
                                if (cardElement) {
                                    cardElement.classList.add('shake');
                                    setTimeout(() => {
                                        cardElement.classList.remove('shake');
                                    }, 500);
                                }
                            });
                            state.flippedCards = [];
                            updateGameBoard();
                        }, 1000);
                    }
                }
            }

            function startTimer() {
                clearInterval(state.timer);
                state.seconds = 0;
                state.timer = setInterval(() => {
                    state.seconds++;
                    updateStats();
                }, 1000);
            }

            function updateStats() {
                // Atualizar tempo
                const minutes = Math.floor(state.seconds / 60).toString().padStart(2, '0');
                const seconds = (state.seconds % 60).toString().padStart(2, '0');
                elements.timeDisplay.textContent = `${minutes}:${seconds}`;

                // Atualizar movimentos e combina√ß√µes
                elements.movesDisplay.textContent = state.moves;
                elements.matchesDisplay.textContent = `${state.matchedPairs}/${state.totalPairs}`;
            }

            function endGame() {
                clearInterval(state.timer);

                // Calcular precis√£o
                const accuracy = Math.round((state.totalPairs / state.moves) * 100) || 0;

                // Atualizar resultados finais
                elements.finalTime.textContent = elements.timeDisplay.textContent;
                elements.finalMoves.textContent = state.moves;
                elements.accuracy.textContent = `${accuracy}%`;

                // Atualizar dificuldade
                const difficultyNames = {
                    easy: 'F√°cil üë∂',
                    medium: 'M√©dio ÔøΩ',
                    hard: 'Dif√≠cil ü¶∏'
                };
                elements.finalDifficulty.textContent = difficultyNames[state.difficulty];

                // Mostrar tela de resultado
                showScreen('result');

                // Efeito de confete
                createConfetti(150);
                addBackgroundStars(30);
            }

            function createConfetti(count) {
                for (let i = 0; i < count; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';

                    // Posi√ß√£o aleat√≥ria na parte superior
                    const posX = Math.random() * window.innerWidth;
                    const delay = Math.random() * 3;
                    const duration = 2 + Math.random() * 4;

                    // Cor aleat√≥ria
                    const colors = ['#FF6B8B', '#4ECDC4', '#FFE66D', '#9B59B6', '#FF9F43', '#2ECC71', '#FF5252'];
                    const color = colors[Math.floor(Math.random() * colors.length)];

                    // Tamanho e forma aleat√≥rios
                    const size = 10 + Math.random() * 15;
                    const isCircle = Math.random() > 0.5;

                    confetti.style.left = `${posX}px`;
                    confetti.style.width = `${size}px`;
                    confetti.style.height = `${size}px`;
                    confetti.style.backgroundColor = color;
                    confetti.style.borderRadius = isCircle ? '50%' : '0';
                    confetti.style.animationDelay = `${delay}s`;
                    confetti.style.animationDuration = `${duration}s`;

                    document.body.appendChild(confetti);

                    // Remover ap√≥s a anima√ß√£o
                    setTimeout(() => {
                        confetti.remove();
                    }, duration * 1000);
                }
            }

            function addBackgroundStars(count) {
                // Limpar estrelas existentes
                document.querySelectorAll('.star').forEach(star => star.remove());

                for (let i = 0; i < count; i++) {
                    const star = document.createElement('i');
                    star.className = 'fas fa-star star';

                    // Posi√ß√£o aleat√≥ria
                    const posX = Math.random() * window.innerWidth;
                    const posY = Math.random() * window.innerHeight;
                    const delay = Math.random() * 2;
                    const duration = 3 + Math.random() * 4;
                    const size = 1 + Math.random() * 3;

                    star.style.left = `${posX}px`;
                    star.style.top = `${posY}px`;
                    star.style.fontSize = `${size}rem`;
                    star.style.animationDelay = `${delay}s`;
                    star.style.animationDuration = `${duration}s`;
                    star.style.opacity = '0';

                    setTimeout(() => {
                        star.style.opacity = '0.3';
                    }, delay * 1000);

                    document.body.appendChild(star);
                }
            }

            function addBackgroundBubbles(count) {
                // Limpar bolhas existentes
                document.querySelectorAll('.bubble').forEach(bubble => bubble.remove());

                for (let i = 0; i < count; i++) {
                    const bubble = document.createElement('div');
                    bubble.className = 'bubble';

                    // Posi√ß√£o aleat√≥ria
                    const posX = Math.random() * window.innerWidth;
                    const posY = window.innerHeight + Math.random() * 100;
                    const delay = Math.random() * 5;
                    const duration = 10 + Math.random() * 10;
                    const size = 20 + Math.random() * 30;

                    bubble.style.left = `${posX}px`;
                    bubble.style.bottom = `-${size}px`;
                    bubble.style.width = `${size}px`;
                    bubble.style.height = `${size}px`;
                    bubble.style.animationDelay = `${delay}s`;
                    bubble.style.animationDuration = `${duration}s`;

                    document.body.appendChild(bubble);

                    // Remover ap√≥s a anima√ß√£o
                    setTimeout(() => {
                        bubble.remove();
                    }, (duration + delay) * 1000);
                }
            }
        });
    </script>
</body>

</html>